{"ast":null,"code":"var _jsxFileName = \"D:\\\\kHAIITDEVERLOPER\\\\iot\\\\traffic\\\\frontend-react\\\\src\\\\components\\\\Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Dashboard({\n  role,\n  socket\n}) {\n  _s();\n  const [frame, setFrame] = useState(\"\");\n  const [counts, setCounts] = useState({\n    up: 0,\n    down: 0\n  });\n  const [plates, setPlates] = useState({});\n  const [threshold, setThreshold] = useState(0.3);\n  useEffect(() => {\n    socket.on(\"frame\", data => {\n      setFrame(\"data:image/jpeg;base64,\" + data.frame);\n      setCounts(data.counts);\n      setPlates(data.plates);\n    });\n  }, [socket]);\n  const sendThreshold = () => {\n    socket.emit(\"update_conf_threshold\", {\n      threshold\n    });\n  };\n  const resetCounter = () => {\n    socket.emit(\"reset_counter\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20,\n      fontFamily: \"Arial\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"H\\u1EC6 TH\\u1ED0NG NH\\u1EACN DI\\u1EC6N PH\\u01AF\\u01A0NG TI\\u1EC6N & BI\\u1EC2N S\\u1ED0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u0110\\u0103ng nh\\u1EADp v\\u1EDBi vai tr\\xF2: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: role.toUpperCase()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), frame && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: frame,\n      alt: \"stream\",\n      style: {\n        width: \"100%\",\n        maxWidth: 800\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"B\\u1ED9 \\u0111\\u1EBFm: UP \", counts.up, \" | DOWN \", counts.down]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), role === \"admin\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0.1\",\n          max: \"0.9\",\n          step: \"0.05\",\n          value: threshold,\n          onChange: e => setThreshold(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendThreshold,\n          children: \"C\\u1EADp nh\\u1EADt ng\\u01B0\\u1EE1ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetCounter,\n          style: {\n            marginLeft: 10,\n            background: \"red\",\n            color: \"white\"\n          },\n          children: \"Reset b\\u1ED9 \\u0111\\u1EBFm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Bi\\u1EC3n s\\u1ED1 g\\u1EA7n nh\\u1EA5t:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: Object.entries(plates).map(([k, v]) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: k.replace(\"LP_\", \"ID \")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 64\n          }, this), \": \", v]\n        }, k, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 52\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"3dYuNVIGv09bfR/JGSP5b/QXMsg=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","role","socket","_s","frame","setFrame","counts","setCounts","up","down","plates","setPlates","threshold","setThreshold","on","data","sendThreshold","emit","resetCounter","style","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","toUpperCase","src","alt","width","maxWidth","marginTop","type","min","max","step","value","onChange","e","target","onClick","marginLeft","background","color","Object","entries","map","k","v","replace","_c","$RefreshReg$"],"sources":["D:/kHAIITDEVERLOPER/iot/traffic/frontend-react/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nexport default function Dashboard({ role, socket }) {\r\n  const [frame, setFrame] = useState(\"\");\r\n  const [counts, setCounts] = useState({ up: 0, down: 0 });\r\n  const [plates, setPlates] = useState({});\r\n  const [threshold, setThreshold] = useState(0.3);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"frame\", data => {\r\n      setFrame(\"data:image/jpeg;base64,\" + data.frame);\r\n      setCounts(data.counts);\r\n      setPlates(data.plates);\r\n    });\r\n  }, [socket]);\r\n\r\n  const sendThreshold = () => {\r\n    socket.emit(\"update_conf_threshold\", { threshold });\r\n  };\r\n\r\n  const resetCounter = () => {\r\n    socket.emit(\"reset_counter\");\r\n  };\r\n\r\n  return (\r\n    <div style={{padding:20, fontFamily:\"Arial\"}}>\r\n      <h1>HỆ THỐNG NHẬN DIỆN PHƯƠNG TIỆN & BIỂN SỐ</h1>\r\n      <p>Đăng nhập với vai trò: <b>{role.toUpperCase()}</b></p>\r\n\r\n      {frame && <img src={frame} alt=\"stream\" style={{width:\"100%\", maxWidth:800}}/>}\r\n\r\n      <div style={{marginTop:20}}>\r\n        <h2>Bộ đếm: UP {counts.up} | DOWN {counts.down}</h2>\r\n\r\n        {role === \"admin\" && (\r\n          <>\r\n            <input type=\"range\" min=\"0.1\" max=\"0.9\" step=\"0.05\" value={threshold} onChange={e=>setThreshold(e.target.value)}/>\r\n            <button onClick={sendThreshold}>Cập nhật ngưỡng</button>\r\n            <button onClick={resetCounter} style={{marginLeft:10, background:\"red\", color:\"white\"}}>Reset bộ đếm</button>\r\n          </>\r\n        )}\r\n\r\n        <h3>Biển số gần nhất:</h3>\r\n        <ul>{Object.entries(plates).map(([k,v]) => <li key={k}><b>{k.replace(\"LP_\",\"ID \")}</b>: {v}</li>)}</ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}